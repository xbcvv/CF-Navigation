/* 简化版 Semantic UI，包含必要功能 */
(function($) {
  // 初始化所有下拉菜单
  function initDropdowns() {
    $('.ui.dropdown').each(function(dropdown) {
      const select = dropdown.querySelector('select');
      const text = document.createElement('div');
      text.className = 'text';
      text.textContent = select.options[select.selectedIndex].text;
      
      const menu = document.createElement('div');
      menu.className = 'menu';
      
      Array.from(select.options).forEach(option => {
        const item = document.createElement('div');
        item.className = 'item';
        item.setAttribute('data-value', option.value);
        item.textContent = option.text;
        item.addEventListener('click', () => {
          select.value = option.value;
          text.textContent = option.text;
          menu.style.display = 'none';
        });
        menu.appendChild(item);
      });
      
      dropdown.insertBefore(text, select);
      dropdown.appendChild(menu);
      
      dropdown.addEventListener('click', (e) => {
        if (e.target !== menu && !menu.contains(e.target)) {
          menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }
      });
      
      document.addEventListener('click', (e) => {
        if (!dropdown.contains(e.target)) {
          menu.style.display = 'none';
        }
      });
    });
  }
  
  // 初始化所有模态框
  function initModals() {
    $('.ui.modal').each(function(modal) {
      // 添加关闭按钮
      const closeBtn = document.createElement('i');
      closeBtn.className = 'close icon';
      closeBtn.addEventListener('click', () => {
        $(modal).modal('hide');
      });
      modal.querySelector('.header').appendChild(closeBtn);
      
      // 点击遮罩关闭
      document.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal-backdrop')) {
          $(modal).modal('hide');
        }
      });
    });
  }
  
  // DOM 加载完成后初始化
  $(function() {
    initDropdowns();
    initModals();
  });
})(window.$); 